---
title: Autoformat
docs:
  - route: /docs/basic-elements
    title: Basic Elements
  - route: /docs/basic-marks
    title: Basic Marks
  - route: /docs/horizontal-rule
    title: Horizontal Rule
  - route: /docs/list
    title: List
---

<ComponentPreview name="autoformat-demo" />

<PackageInfo>

## 功能特点

- 通过短代码快速格式化内容。
- 提供类似 markdown 的行内代码，用于实时输入。
- 通过避免工具栏按钮和快捷键来简化编辑。
- 自动转换功能（例如，`#` 到 H1）。
- 提供预定义的格式化规则。

**格式化快捷代码：**

- `text*` 用于加粗文本。
- `_text_` 用于斜体文本。
- `~~text~~` 用于删除线文本。
- ...等等。

</PackageInfo>

## 安装

```bash
npm install @udecode/plate-autoformat
```

## 使用

```tsx
import { AutoformatPlugin } from '@udecode/plate-autoformat/react';

const plugins = [
  // ...otherPlugins,
  AutoformatPlugin.configure({
    options: {
      rules: autoformatRules,
      enableUndoOnDelete: true,
    },
  }),
];
```

## 示例

### `autoformatRules`

<ComponentSource name="autoformat-plugin" />

### `autoformatBlocks`

### `autoformatIndentLists`
如果使用 [Indent List 插件](/docs/indent-list)，您可以使用以下规则：

### `autoformatLists`

如果使用 [List 插件](/docs/list)，您可以使用以下规则：

### `autoformatMarks`

### `autoformatUtils`

## API

### AutoformatPlugin

<APIOptions>

<APIItem name="rules" type="AutoformatRule[]" optional>

触发规则列表。

- 可以是以下之一：`AutoformatBlockRule`、`AutoformatMarkRule`、`AutoformatTextRule`。
- 继承 `AutoformatCommonRule`。

</APIItem>
<APIItem name="enableUndoOnDelete" type="boolean" optional>

Enable undo on delete.

</APIItem>
</APIOptions>

### Rules

You can import the following rules:

| 名称                           | 描述                          |
| :----------------------------- | :----------------------------------- |
| `autoformatSmartQuotes`        | 将 `"text"` 转换为 `"text"`。       |
|                                | 将 `'text'` 转换为 `'text'`。       |
| `autoformatPunctuation`        | 将 `--` 转换为 `—`。                |
|                                | 将 `...` 转换为 `…`。               |
|                                | 将 `>>` 转换为 `»`。                |
|                                | 将 `<<` 转换为 `«`。                |
| `autoformatArrow`              | 将 `->` 转换为 `→`。                |
|                                | 将 `<-` 转换为 `←`。                |
|                                | 将 `=>` 转换为 `⇒`。                |
|                                | 将 `<=` 和 `≤=` 转换为 `⇐`。       |
| `autoformatLegal`              | 将 `(tm)` 和 `(TM)` 转换为 `™`。  |
|                                | 将 `(r)` 和 `(R)` 转换为 `®`。    |
|                                | 将 `(c)` 和 `(C)` 转换为 `©`。    |
| `autoformatLegalHtml`          | 将 `&trade;` 转换为 `™`。          |
|                                | 将 `&reg;` 转换为 `®`。            |
|                                | 将 `&copy;` 转换为 `©`。           |
|                                | 将 `&sect;` 转换为 `§`。            |
| `autoformatComparison`         | 将 `!>` 转换为 `!>`。               |
|                                | 将 `!<` 转换为 `≮`。                |
|                                | 将 `>=` 转换为 `≥`。                |
|                                | 将 `<=` 转换为 `≤`。                |
|                                | 将 `!>=` 转换为 `≱`。               |
|                                | 将 `!<=` 转换为 `≰`。               |
| `autoformatEquality`           | 将 `!=` 转换为 `≠`。                |
|                                | 将 `==` 转换为 `≡`。                |
|                                | 将 `!==` 和 `≠=` 转换为 `≢`。      |
|                                | 将 `~=` 转换为 `≈`。                |
|                                | 将 `!~=` 转换为 `≉`。               |
| `autoformatFraction`           | 将 `1/2` 转换为 `½`。               |
|                                | 将 `1/3` 转换为 `⅓`。               |
|                                | ...                                  |
|                                | 将 `7/8` 转换为 `⅞`。               |
| `autoformatDivision`           | 将 `//` 转换为 `÷`。                |
| `autoformatOperation`          | 将 `+-` 转换为 `±`。                |
|                                | 将 `%%` 转换为 `‰`。                |
|                                | 将 `%%%` 和 `‰%` 转换为 `‱`。       |
|                                | `autoformatDivision` rules.          |
| `autoformatSubscriptNumbers`   | 将 `~0` 转换为 `₀`。                |
|                                | 将 `~1` 转换为 `₁`。                |
|                                | ...                                  |
|                                | 将 `~9` 转换为 `₉`。                |
| `autoformatSubscriptSymbols`   | 将 `~+` 转换为 `₊`。                |
|                                | 将 `~-` 转换为 `₋`。                |
| `autoformatSuperscriptNumbers` | 将 `^0` 转换为 `⁰`。                |
|                                | 将 `^1` 转换为 `¹`。                |
|                                | ...                                  |
|                                | 将 `^9` 转换为 `⁹`。                |
| `autoformatSuperscriptSymbols` | 将 `^+` 转换为 `°`。                |
|                                | 将 `^-` 转换为 `⁺`。                |
| `autoformatMath`               | `autoformatComparison` rules         |
|                                | `autoformatEquality` rules           |
|                                | `autoformatOperation` rules          |
|                                | `autoformatFraction` rules           |
|                                | `autoformatSubscriptNumbers` rules   |
|                                | `autoformatSubscriptSymbols` rules   |
|                                | `autoformatSuperscriptNumbers` rules |
|                                | `autoformatSuperscriptSymbols` rules |

### AutoformatCommonRule
自动格式化规则的通用结构接口，不受其模式影响。

<APIAttributes>
<APIItem
  name="match"
  type="string | string[] | MatchRange | MatchRange[]"
>

当触发器和光标前的文本匹配时应用规则。

- 对于 `mode: 'block'`：在光标前查找结束匹配。
- 对于 `mode: 'text'`：在光标前查找结束匹配。如果 `format` 是数组，还会查找开始匹配。
- 对于 `mode: 'mark'`：查找开始和结束匹配。
- 注意：`'_*'`、`['_*']` 和 `{ start: '_*', end: '*_' }` 是等效的。
- `MatchRange`：

<APISubList>

<APISubListItem parent="match" name="start" type="string">

范围的起始点。

</APISubListItem>
<APISubListItem parent="match" name="end" type="string">

范围的结束点。

</APISubListItem>
</APISubList>

</APIItem>
<APIItem name="trigger" type="string | string[]" optional>

触发自动格式化的字符。

</APIItem>
<APIItem name="insertTrigger" type="boolean" optional>

如果为 true，在自动格式化后插入触发字符。

- **默认值：** `false`

</APIItem>
<APIItem
  name="query"
  type="(editor: PlateEditor, options: AutoformatQueryOptions) => boolean"
  optional
>

允许自动格式化的查询函数。

- `AutoformatQueryOptions` 继承 `Omit<AutoformatCommonRule, 'query'>`：

<APISubList>
<APISubListItem parent="options" name="text" type="string">

`insertText` 文本。

</APISubListItem>
</APISubList>

</APIItem>
</APIAttributes>

### AutoformatBlockRule

块模式自动格式化规则的接口。

<APIAttributes>
<APIItem name="mode" type="'block'">

- 文本：插入文本。
- 块：设置块类型或自定义格式。
- 标记：在匹配之间插入标记。

</APIItem>
<APIItem name="match" type="string | string[]">

匹配自动格式化规则的模式。

</APIItem>
<APIItem name="type" type="string" optional>

- 对于 `mode: 'block'`：设置块类型。如果定义了 `format`，则忽略此字段。
- 对于 `mode: 'mark'`：要添加的标记。

</APIItem>
<APIItem name="triggerAtBlockStart" type="boolean" optional>

如果为 true，触发器应该在块开始处才允许自动格式化。

- **默认值：** `true`

</APIItem>
<APIItem name="allowSameTypeAbove" type="boolean" optional>

如果为 true，即使在选定块上方有相同类型的块，也允许自动格式化。

- **默认值：** `false`

</APIItem>
<APIItem name="preFormat" type="(editor: PlateEditor) => void" optional>

在 `format` 之前调用的函数。通常用于重置选定的块。

</APIItem>
<APIItem name="format" type="(editor: PlateEditor) => void" optional>

自定义格式化函数。

</APIItem>
</APIAttributes>

### AutoformatMarkRule

标记模式自动格式化规则的接口。

<APIAttributes>
<APIItem name="mode" type="'mark'">

模式为 'mark'。

</APIItem>
<APIItem name="type" type="string | string[]">

要添加的标记。

</APIItem>
<APIItem name="ignoreTrim" type="boolean" optional>

如果为 false，当字符串可以被修剪时不进行格式化。

</APIItem>
</APIAttributes>

### AutoformatTextRule

文本模式自动格式化规则的接口。

<APIParameters>
<APIItem name="mode" type="'text'">

模式为 'text'。

</APIItem>
<APIItem name="match" type="string | string[]">

匹配自动格式化规则的模式。

</APIItem>
<APIItem name="format" type="string | string[] | ((editor: PlateEditor, options: GetMatchPointsReturnType) => void)">

匹配的文本被该字符串替换，匹配的文本被这些字符串替换，或在匹配时调用的函数。

</APIItem>
</APIParameters>
