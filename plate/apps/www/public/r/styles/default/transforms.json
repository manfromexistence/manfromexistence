{
  "dependencies": [
    "@udecode/plate-callout",
    "@udecode/plate-code-block",
    "@udecode/plate-date",
    "@udecode/plate-heading",
    "@udecode/plate-indent-list",
    "@udecode/plate-layout",
    "@udecode/plate-link",
    "@udecode/plate-math",
    "@udecode/plate-media",
    "@udecode/plate-table"
  ],
  "files": [
    {
      "path": "components/editor/transforms.ts",
      "content": "'use client';\n\nimport type { PlateEditor } from '@udecode/plate/react';\n\nimport {\n  type NodeEntry,\n  type Path,\n  type TElement,\n  PathApi,\n} from '@udecode/plate';\nimport { insertCallout } from '@udecode/plate-callout';\nimport { CalloutPlugin } from '@udecode/plate-callout/react';\nimport { insertCodeBlock } from '@udecode/plate-code-block';\nimport { CodeBlockPlugin } from '@udecode/plate-code-block/react';\nimport { insertDate } from '@udecode/plate-date';\nimport { DatePlugin } from '@udecode/plate-date/react';\nimport { insertToc } from '@udecode/plate-heading';\nimport { TocPlugin } from '@udecode/plate-heading/react';\nimport { INDENT_LIST_KEYS, ListStyleType } from '@udecode/plate-indent-list';\nimport { IndentListPlugin } from '@udecode/plate-indent-list/react';\nimport { insertColumnGroup, toggleColumnGroup } from '@udecode/plate-layout';\nimport { ColumnItemPlugin, ColumnPlugin } from '@udecode/plate-layout/react';\nimport { LinkPlugin, triggerFloatingLink } from '@udecode/plate-link/react';\nimport { insertEquation, insertInlineEquation } from '@udecode/plate-math';\nimport {\n  EquationPlugin,\n  InlineEquationPlugin,\n} from '@udecode/plate-math/react';\nimport {\n  insertAudioPlaceholder,\n  insertFilePlaceholder,\n  insertMedia,\n  insertVideoPlaceholder,\n} from '@udecode/plate-media';\nimport {\n  AudioPlugin,\n  FilePlugin,\n  ImagePlugin,\n  MediaEmbedPlugin,\n  VideoPlugin,\n} from '@udecode/plate-media/react';\nimport { SuggestionPlugin } from '@udecode/plate-suggestion/react';\nimport {\n  TableCellPlugin,\n  TablePlugin,\n  TableRowPlugin,\n} from '@udecode/plate-table/react';\n\nexport const STRUCTURAL_TYPES: string[] = [\n  ColumnPlugin.key,\n  ColumnItemPlugin.key,\n  TablePlugin.key,\n  TableRowPlugin.key,\n  TableCellPlugin.key,\n];\n\nconst ACTION_THREE_COLUMNS = 'action_three_columns';\n\nconst insertList = (editor: PlateEditor, type: string) => {\n  editor.tf.insertNodes(\n    editor.api.create.block({\n      indent: 1,\n      listStyleType: type,\n    }),\n    { select: true }\n  );\n};\n\nconst insertBlockMap: Record<\n  string,\n  (editor: PlateEditor, type: string) => void\n> = {\n  [INDENT_LIST_KEYS.todo]: insertList,\n  [ListStyleType.Decimal]: insertList,\n  [ListStyleType.Disc]: insertList,\n  [ACTION_THREE_COLUMNS]: (editor) =>\n    insertColumnGroup(editor, { columns: 3, select: true }),\n  [AudioPlugin.key]: (editor) =>\n    insertAudioPlaceholder(editor, { select: true }),\n  [CalloutPlugin.key]: (editor) => insertCallout(editor, { select: true }),\n  [CodeBlockPlugin.key]: (editor) => insertCodeBlock(editor, { select: true }),\n  [EquationPlugin.key]: (editor) => insertEquation(editor, { select: true }),\n  [FilePlugin.key]: (editor) => insertFilePlaceholder(editor, { select: true }),\n  [ImagePlugin.key]: (editor) =>\n    insertMedia(editor, {\n      select: true,\n      type: ImagePlugin.key,\n    }),\n  [MediaEmbedPlugin.key]: (editor) =>\n    insertMedia(editor, {\n      select: true,\n      type: MediaEmbedPlugin.key,\n    }),\n  [TablePlugin.key]: (editor) =>\n    editor.getTransforms(TablePlugin).insert.table({}, { select: true }),\n  [TocPlugin.key]: (editor) => insertToc(editor, { select: true }),\n  [VideoPlugin.key]: (editor) =>\n    insertVideoPlaceholder(editor, { select: true }),\n};\n\nconst insertInlineMap: Record<\n  string,\n  (editor: PlateEditor, type: string) => void\n> = {\n  [DatePlugin.key]: (editor) => insertDate(editor, { select: true }),\n  [InlineEquationPlugin.key]: (editor) =>\n    insertInlineEquation(editor, '', { select: true }),\n  [LinkPlugin.key]: (editor) => triggerFloatingLink(editor, { focused: true }),\n};\n\nexport const insertBlock = (editor: PlateEditor, type: string) => {\n  editor.tf.withoutNormalizing(() => {\n    const block = editor.api.block();\n\n    if (!block) return;\n    if (type in insertBlockMap) {\n      insertBlockMap[type](editor, type);\n    } else {\n      editor.tf.insertNodes(editor.api.create.block({ type }), {\n        at: PathApi.next(block[1]),\n        select: true,\n      });\n    }\n    if (getBlockType(block[0]) !== type) {\n      editor.getApi(SuggestionPlugin).suggestion.withoutSuggestions(() => {\n        editor.tf.removeNodes({ previousEmptyBlock: true });\n      });\n    }\n  });\n};\n\nexport const insertInlineElement = (editor: PlateEditor, type: string) => {\n  if (insertInlineMap[type]) {\n    insertInlineMap[type](editor, type);\n  }\n};\n\nconst setList = (\n  editor: PlateEditor,\n  type: string,\n  entry: NodeEntry<TElement>\n) => {\n  editor.tf.setNodes(\n    editor.api.create.block({\n      indent: 1,\n      listStyleType: type,\n    }),\n    {\n      at: entry[1],\n    }\n  );\n};\n\nconst setBlockMap: Record<\n  string,\n  (editor: PlateEditor, type: string, entry: NodeEntry<TElement>) => void\n> = {\n  [INDENT_LIST_KEYS.todo]: setList,\n  [ListStyleType.Decimal]: setList,\n  [ListStyleType.Disc]: setList,\n  [ACTION_THREE_COLUMNS]: (editor) => toggleColumnGroup(editor, { columns: 3 }),\n};\n\nexport const setBlockType = (\n  editor: PlateEditor,\n  type: string,\n  { at }: { at?: Path } = {}\n) => {\n  editor.tf.withoutNormalizing(() => {\n    const setEntry = (entry: NodeEntry<TElement>) => {\n      const [node, path] = entry;\n\n      if (node[IndentListPlugin.key]) {\n        editor.tf.unsetNodes([IndentListPlugin.key, 'indent'], { at: path });\n      }\n      if (type in setBlockMap) {\n        return setBlockMap[type](editor, type, entry);\n      }\n      if (node.type !== type) {\n        editor.tf.setNodes({ type }, { at: path });\n      }\n    };\n\n    if (at) {\n      const entry = editor.api.node<TElement>(at);\n\n      if (entry) {\n        setEntry(entry);\n\n        return;\n      }\n    }\n\n    const entries = editor.api.blocks({ mode: 'lowest' });\n\n    entries.forEach((entry) => setEntry(entry));\n  });\n};\n\nexport const getBlockType = (block: TElement) => {\n  if (block[IndentListPlugin.key]) {\n    if (block[IndentListPlugin.key] === ListStyleType.Decimal) {\n      return ListStyleType.Decimal;\n    } else if (block[IndentListPlugin.key] === INDENT_LIST_KEYS.todo) {\n      return INDENT_LIST_KEYS.todo;\n    } else {\n      return ListStyleType.Disc;\n    }\n  }\n\n  return block.type;\n};\n",
      "type": "registry:component",
      "target": "components/editor/transforms.ts"
    }
  ],
  "name": "transforms",
  "type": "registry:component",
  "$schema": "https://platejs.org/schema/registry-item.json",
  "author": "udecode (https://platejs.org)"
}